function Z(n,r,t,e){const i=n.length;let u=0,l;if(r<0?r=-r>i?0:i+r:r=r>i?i:r,t=t>0?t:0,e.length<1e4)l=Array.from(e),l.unshift(r,t),n.splice(...l);else for(t&&n.splice(r,t);u<e.length;)l=e.slice(u,u+1e4),l.unshift(r,0),n.splice(...l),u+=1e4,r+=1e4}function Q(n,r){return n.length>0?(Z(n,n.length,0,r),n):r}const gn={}.hasOwnProperty;function qn(n){const r={};let t=-1;for(;++t<n.length;)jn(r,n[t]);return r}function jn(n,r){let t;for(t in r){const i=(gn.call(n,t)?n[t]:void 0)||(n[t]={}),u=r[t];let l;if(u)for(l in u){gn.call(i,l)||(i[l]=[]);const a=u[l];Rn(i[l],Array.isArray(a)?a:a?[a]:[])}}}function Rn(n,r){let t=-1;const e=[];for(;++t<r.length;)(r[t].add==="after"?n:e).push(r[t]);Z(n,0,0,e)}const Nn=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,U=J(/[A-Za-z]/),W=J(/[\dA-Za-z]/),Hn=J(/[#-'*+\--9=?A-Z^-~]/);function sn(n){return n!==null&&(n<32||n===127)}const hn=J(/\d/),Vn=J(/[\dA-Fa-f]/),Qn=J(/[!-/:-@[-`{-~]/);function C(n){return n!==null&&n<-2}function V(n){return n!==null&&(n<0||n===32)}function E(n){return n===-2||n===-1||n===32}const Wn=J(Nn),Un=J(/\s/);function J(n){return r;function r(t){return t!==null&&n.test(String.fromCharCode(t))}}function I(n,r,t,e){const i=e?e-1:Number.POSITIVE_INFINITY;let u=0;return l;function l(x){return E(x)?(n.enter(t),a(x)):r(x)}function a(x){return E(x)&&u++<i?(n.consume(x),a):(n.exit(t),r(x))}}const Zn={tokenize:$n};function $n(n){const r=n.attempt(this.parser.constructs.contentInitial,e,i);let t;return r;function e(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),I(n,r,"linePrefix")}function i(a){return n.enter("paragraph"),u(a)}function u(a){const x=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=x),t=x,l(a)}function l(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return C(a)?(n.consume(a),n.exit("chunkText"),u):(n.consume(a),l)}}const Yn={tokenize:Gn},kn={tokenize:Jn};function Gn(n){const r=this,t=[];let e=0,i,u,l;return a;function a(b){if(e<t.length){const B=t[e];return r.containerState=B[1],n.attempt(B[0].continuation,x,m)(b)}return m(b)}function x(b){if(e++,r.containerState._closeFlow){r.containerState._closeFlow=void 0,i&&_();const B=r.events.length;let D=B,k;for(;D--;)if(r.events[D][0]==="exit"&&r.events[D][1].type==="chunkFlow"){k=r.events[D][1].end;break}f(e);let y=B;for(;y<r.events.length;)r.events[y][1].end=Object.assign({},k),y++;return Z(r.events,D+1,0,r.events.slice(B)),r.events.length=y,m(b)}return a(b)}function m(b){if(e===t.length){if(!i)return g(b);if(i.currentConstruct&&i.currentConstruct.concrete)return z(b);r.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return r.containerState={},n.check(kn,c,p)(b)}function c(b){return i&&_(),f(e),g(b)}function p(b){return r.parser.lazy[r.now().line]=e!==t.length,l=r.now().offset,z(b)}function g(b){return r.containerState={},n.attempt(kn,h,z)(b)}function h(b){return e++,t.push([r.currentConstruct,r.containerState]),g(b)}function z(b){if(b===null){i&&_(),f(0),n.consume(b);return}return i=i||r.parser.flow(r.now()),n.enter("chunkFlow",{contentType:"flow",previous:u,_tokenizer:i}),w(b)}function w(b){if(b===null){T(n.exit("chunkFlow"),!0),f(0),n.consume(b);return}return C(b)?(n.consume(b),T(n.exit("chunkFlow")),e=0,r.interrupt=void 0,a):(n.consume(b),w)}function T(b,B){const D=r.sliceStream(b);if(B&&D.push(null),b.previous=u,u&&(u.next=b),u=b,i.defineSkip(b.start),i.write(D),r.parser.lazy[b.start.line]){let k=i.events.length;for(;k--;)if(i.events[k][1].start.offset<l&&(!i.events[k][1].end||i.events[k][1].end.offset>l))return;const y=r.events.length;let L=y,M,q;for(;L--;)if(r.events[L][0]==="exit"&&r.events[L][1].type==="chunkFlow"){if(M){q=r.events[L][1].end;break}M=!0}for(f(e),k=y;k<r.events.length;)r.events[k][1].end=Object.assign({},q),k++;Z(r.events,L+1,0,r.events.slice(y)),r.events.length=k}}function f(b){let B=t.length;for(;B-- >b;){const D=t[B];r.containerState=D[1],D[0].exit.call(r,n)}t.length=b}function _(){i.write([null]),u=void 0,i=void 0,r.containerState._closeFlow=void 0}}function Jn(n,r,t){return I(n,n.attempt(this.parser.constructs.document,r,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function fn(n){if(n===null||V(n)||Un(n))return 1;if(Wn(n))return 2}function pn(n,r,t){const e=[];let i=-1;for(;++i<n.length;){const u=n[i].resolveAll;u&&!e.includes(u)&&(r=u(r,t),e.push(u))}return r}const mn={name:"attention",tokenize:Xn,resolveAll:Kn};function Kn(n,r){let t=-1,e,i,u,l,a,x,m,c;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(e=t;e--;)if(n[e][0]==="exit"&&n[e][1].type==="attentionSequence"&&n[e][1]._open&&r.sliceSerialize(n[e][1]).charCodeAt(0)===r.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[e][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[e][1].end.offset-n[e][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;x=n[e][1].end.offset-n[e][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const p=Object.assign({},n[e][1].end),g=Object.assign({},n[t][1].start);bn(p,-x),bn(g,x),l={type:x>1?"strongSequence":"emphasisSequence",start:p,end:Object.assign({},n[e][1].end)},a={type:x>1?"strongSequence":"emphasisSequence",start:Object.assign({},n[t][1].start),end:g},u={type:x>1?"strongText":"emphasisText",start:Object.assign({},n[e][1].end),end:Object.assign({},n[t][1].start)},i={type:x>1?"strong":"emphasis",start:Object.assign({},l.start),end:Object.assign({},a.end)},n[e][1].end=Object.assign({},l.start),n[t][1].start=Object.assign({},a.end),m=[],n[e][1].end.offset-n[e][1].start.offset&&(m=Q(m,[["enter",n[e][1],r],["exit",n[e][1],r]])),m=Q(m,[["enter",i,r],["enter",l,r],["exit",l,r],["enter",u,r]]),m=Q(m,pn(r.parser.constructs.insideSpan.null,n.slice(e+1,t),r)),m=Q(m,[["exit",u,r],["enter",a,r],["exit",a,r],["exit",i,r]]),n[t][1].end.offset-n[t][1].start.offset?(c=2,m=Q(m,[["enter",n[t][1],r],["exit",n[t][1],r]])):c=0,Z(n,e-1,t-e+3,m),t=e+m.length-c-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function Xn(n,r){const t=this.parser.constructs.attentionMarkers.null,e=this.previous,i=fn(e);let u;return l;function l(x){return u=x,n.enter("attentionSequence"),a(x)}function a(x){if(x===u)return n.consume(x),a;const m=n.exit("attentionSequence"),c=fn(x),p=!c||c===2&&i||t.includes(x),g=!i||i===2&&c||t.includes(e);return m._open=!!(u===42?p:p&&(i||!g)),m._close=!!(u===42?g:g&&(c||!p)),r(x)}}function bn(n,r){n.column+=r,n.offset+=r,n._bufferIndex+=r}const vn={name:"autolink",tokenize:dn};function dn(n,r,t){let e=0;return i;function i(h){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(h),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),u}function u(h){return U(h)?(n.consume(h),l):m(h)}function l(h){return h===43||h===45||h===46||W(h)?(e=1,a(h)):m(h)}function a(h){return h===58?(n.consume(h),e=0,x):(h===43||h===45||h===46||W(h))&&e++<32?(n.consume(h),a):(e=0,m(h))}function x(h){return h===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(h),n.exit("autolinkMarker"),n.exit("autolink"),r):h===null||h===32||h===60||sn(h)?t(h):(n.consume(h),x)}function m(h){return h===64?(n.consume(h),c):Hn(h)?(n.consume(h),m):t(h)}function c(h){return W(h)?p(h):t(h)}function p(h){return h===46?(n.consume(h),e=0,c):h===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(h),n.exit("autolinkMarker"),n.exit("autolink"),r):g(h)}function g(h){if((h===45||W(h))&&e++<63){const z=h===45?g:p;return n.consume(h),z}return t(h)}}const un={tokenize:nt,partial:!0};function nt(n,r,t){return e;function e(u){return E(u)?I(n,i,"linePrefix")(u):i(u)}function i(u){return u===null||C(u)?r(u):t(u)}}const wn={name:"blockQuote",tokenize:tt,continuation:{tokenize:et},exit:rt};function tt(n,r,t){const e=this;return i;function i(l){if(l===62){const a=e.containerState;return a.open||(n.enter("blockQuote",{_container:!0}),a.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(l),n.exit("blockQuoteMarker"),u}return t(l)}function u(l){return E(l)?(n.enter("blockQuotePrefixWhitespace"),n.consume(l),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),r):(n.exit("blockQuotePrefix"),r(l))}}function et(n,r,t){const e=this;return i;function i(l){return E(l)?I(n,u,"linePrefix",e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):u(l)}function u(l){return n.attempt(wn,r,t)(l)}}function rt(n){n.exit("blockQuote")}const yn={name:"characterEscape",tokenize:it};function it(n,r,t){return e;function e(u){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(u),n.exit("escapeMarker"),i}function i(u){return Qn(u)?(n.enter("characterEscapeValue"),n.consume(u),n.exit("characterEscapeValue"),n.exit("characterEscape"),r):t(u)}}const Fn=document.createElement("i");function In(n){const r="&"+n+";";Fn.innerHTML=r;const t=Fn.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===r?!1:t}const Bn={name:"characterReference",tokenize:ut};function ut(n,r,t){const e=this;let i=0,u,l;return a;function a(p){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(p),n.exit("characterReferenceMarker"),x}function x(p){return p===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(p),n.exit("characterReferenceMarkerNumeric"),m):(n.enter("characterReferenceValue"),u=31,l=W,c(p))}function m(p){return p===88||p===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(p),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),u=6,l=Vn,c):(n.enter("characterReferenceValue"),u=7,l=hn,c(p))}function c(p){if(p===59&&i){const g=n.exit("characterReferenceValue");return l===W&&!In(e.sliceSerialize(g))?t(p):(n.enter("characterReferenceMarker"),n.consume(p),n.exit("characterReferenceMarker"),n.exit("characterReference"),r)}return l(p)&&i++<u?(n.consume(p),c):t(p)}}const Sn={tokenize:at,partial:!0},Cn={name:"codeFenced",tokenize:lt,concrete:!0};function lt(n,r,t){const e=this,i={tokenize:D,partial:!0};let u=0,l=0,a;return x;function x(k){return m(k)}function m(k){const y=e.events[e.events.length-1];return u=y&&y[1].type==="linePrefix"?y[2].sliceSerialize(y[1],!0).length:0,a=k,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),c(k)}function c(k){return k===a?(l++,n.consume(k),c):l<3?t(k):(n.exit("codeFencedFenceSequence"),E(k)?I(n,p,"whitespace")(k):p(k))}function p(k){return k===null||C(k)?(n.exit("codeFencedFence"),e.interrupt?r(k):n.check(Sn,w,B)(k)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),g(k))}function g(k){return k===null||C(k)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),p(k)):E(k)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),I(n,h,"whitespace")(k)):k===96&&k===a?t(k):(n.consume(k),g)}function h(k){return k===null||C(k)?p(k):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),z(k))}function z(k){return k===null||C(k)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),p(k)):k===96&&k===a?t(k):(n.consume(k),z)}function w(k){return n.attempt(i,B,T)(k)}function T(k){return n.enter("lineEnding"),n.consume(k),n.exit("lineEnding"),f}function f(k){return u>0&&E(k)?I(n,_,"linePrefix",u+1)(k):_(k)}function _(k){return k===null||C(k)?n.check(Sn,w,B)(k):(n.enter("codeFlowValue"),b(k))}function b(k){return k===null||C(k)?(n.exit("codeFlowValue"),_(k)):(n.consume(k),b)}function B(k){return n.exit("codeFenced"),r(k)}function D(k,y,L){let M=0;return q;function q(A){return k.enter("lineEnding"),k.consume(A),k.exit("lineEnding"),S}function S(A){return k.enter("codeFencedFence"),E(A)?I(k,F,"linePrefix",e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):F(A)}function F(A){return A===a?(k.enter("codeFencedFenceSequence"),O(A)):L(A)}function O(A){return A===a?(M++,k.consume(A),O):M>=l?(k.exit("codeFencedFenceSequence"),E(A)?I(k,P,"whitespace")(A):P(A)):L(A)}function P(A){return A===null||C(A)?(k.exit("codeFencedFence"),y(A)):L(A)}}}function at(n,r,t){const e=this;return i;function i(l){return l===null?t(l):(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),u)}function u(l){return e.parser.lazy[e.now().line]?t(l):r(l)}}const an={name:"codeIndented",tokenize:st},ot={tokenize:ht,partial:!0};function st(n,r,t){const e=this;return i;function i(m){return n.enter("codeIndented"),I(n,u,"linePrefix",5)(m)}function u(m){const c=e.events[e.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?l(m):t(m)}function l(m){return m===null?x(m):C(m)?n.attempt(ot,l,x)(m):(n.enter("codeFlowValue"),a(m))}function a(m){return m===null||C(m)?(n.exit("codeFlowValue"),l(m)):(n.consume(m),a)}function x(m){return n.exit("codeIndented"),r(m)}}function ht(n,r,t){const e=this;return i;function i(l){return e.parser.lazy[e.now().line]?t(l):C(l)?(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),i):I(n,u,"linePrefix",5)(l)}function u(l){const a=e.events[e.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?r(l):C(l)?i(l):t(l)}}const mt={name:"codeText",tokenize:xt,resolve:pt,previous:ct};function pt(n){let r=n.length-4,t=3,e,i;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[r][1].type==="lineEnding"||n[r][1].type==="space")){for(e=t;++e<r;)if(n[e][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[r][1].type="codeTextPadding",t+=2,r-=2;break}}for(e=t-1,r++;++e<=r;)i===void 0?e!==r&&n[e][1].type!=="lineEnding"&&(i=e):(e===r||n[e][1].type==="lineEnding")&&(n[i][1].type="codeTextData",e!==i+2&&(n[i][1].end=n[e-1][1].end,n.splice(i+2,e-i-2),r-=e-i-2,e=i+2),i=void 0);return n}function ct(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function xt(n,r,t){let e=0,i,u;return l;function l(p){return n.enter("codeText"),n.enter("codeTextSequence"),a(p)}function a(p){return p===96?(n.consume(p),e++,a):(n.exit("codeTextSequence"),x(p))}function x(p){return p===null?t(p):p===32?(n.enter("space"),n.consume(p),n.exit("space"),x):p===96?(u=n.enter("codeTextSequence"),i=0,c(p)):C(p)?(n.enter("lineEnding"),n.consume(p),n.exit("lineEnding"),x):(n.enter("codeTextData"),m(p))}function m(p){return p===null||p===32||p===96||C(p)?(n.exit("codeTextData"),x(p)):(n.consume(p),m)}function c(p){return p===96?(n.consume(p),i++,c):i===e?(n.exit("codeTextSequence"),n.exit("codeText"),r(p)):(u.type="codeTextData",m(p))}}function On(n){const r={};let t=-1,e,i,u,l,a,x,m;for(;++t<n.length;){for(;t in r;)t=r[t];if(e=n[t],t&&e[1].type==="chunkFlow"&&n[t-1][1].type==="listItemPrefix"&&(x=e[1]._tokenizer.events,u=0,u<x.length&&x[u][1].type==="lineEndingBlank"&&(u+=2),u<x.length&&x[u][1].type==="content"))for(;++u<x.length&&x[u][1].type!=="content";)x[u][1].type==="chunkText"&&(x[u][1]._isInFirstContentOfListItem=!0,u++);if(e[0]==="enter")e[1].contentType&&(Object.assign(r,gt(n,t)),t=r[t],m=!0);else if(e[1]._container){for(u=t,i=void 0;u--&&(l=n[u],l[1].type==="lineEnding"||l[1].type==="lineEndingBlank");)l[0]==="enter"&&(i&&(n[i][1].type="lineEndingBlank"),l[1].type="lineEnding",i=u);i&&(e[1].end=Object.assign({},n[i][1].start),a=n.slice(i,t),a.unshift(e),Z(n,i,t-i+1,a))}}return!m}function gt(n,r){const t=n[r][1],e=n[r][2];let i=r-1;const u=[],l=t._tokenizer||e.parser[t.contentType](t.start),a=l.events,x=[],m={};let c,p,g=-1,h=t,z=0,w=0;const T=[w];for(;h;){for(;n[++i][1]!==h;);u.push(i),h._tokenizer||(c=e.sliceStream(h),h.next||c.push(null),p&&l.defineSkip(h.start),h._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(c),h._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=h,h=h.next}for(h=t;++g<a.length;)a[g][0]==="exit"&&a[g-1][0]==="enter"&&a[g][1].type===a[g-1][1].type&&a[g][1].start.line!==a[g][1].end.line&&(w=g+1,T.push(w),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(l.events=[],h?(h._tokenizer=void 0,h.previous=void 0):T.pop(),g=T.length;g--;){const f=a.slice(T[g],T[g+1]),_=u.pop();x.unshift([_,_+f.length-1]),Z(n,_,2,f)}for(g=-1;++g<x.length;)m[z+x[g][0]]=z+x[g][1],z+=x[g][1]-x[g][0]-1;return m}const kt={tokenize:Ft,resolve:bt},ft={tokenize:St,partial:!0};function bt(n){return On(n),n}function Ft(n,r){let t;return e;function e(a){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?u(a):C(a)?n.check(ft,l,u)(a):(n.consume(a),i)}function u(a){return n.exit("chunkContent"),n.exit("content"),r(a)}function l(a){return n.consume(a),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function St(n,r,t){const e=this;return i;function i(l){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),I(n,u,"linePrefix")}function u(l){if(l===null||C(l))return t(l);const a=e.events[e.events.length-1];return!e.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?r(l):n.interrupt(e.parser.constructs.flow,t,r)(l)}}function Dn(n,r,t,e,i,u,l,a,x){const m=x||Number.POSITIVE_INFINITY;let c=0;return p;function p(f){return f===60?(n.enter(e),n.enter(i),n.enter(u),n.consume(f),n.exit(u),g):f===null||f===32||f===41||sn(f)?t(f):(n.enter(e),n.enter(l),n.enter(a),n.enter("chunkString",{contentType:"string"}),w(f))}function g(f){return f===62?(n.enter(u),n.consume(f),n.exit(u),n.exit(i),n.exit(e),r):(n.enter(a),n.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===62?(n.exit("chunkString"),n.exit(a),g(f)):f===null||f===60||C(f)?t(f):(n.consume(f),f===92?z:h)}function z(f){return f===60||f===62||f===92?(n.consume(f),h):h(f)}function w(f){return!c&&(f===null||f===41||V(f))?(n.exit("chunkString"),n.exit(a),n.exit(l),n.exit(e),r(f)):c<m&&f===40?(n.consume(f),c++,w):f===41?(n.consume(f),c--,w):f===null||f===32||f===40||sn(f)?t(f):(n.consume(f),f===92?T:w)}function T(f){return f===40||f===41||f===92?(n.consume(f),w):w(f)}}function Tn(n,r,t,e,i,u){const l=this;let a=0,x;return m;function m(h){return n.enter(e),n.enter(i),n.consume(h),n.exit(i),n.enter(u),c}function c(h){return a>999||h===null||h===91||h===93&&!x||h===94&&!a&&"_hiddenFootnoteSupport"in l.parser.constructs?t(h):h===93?(n.exit(u),n.enter(i),n.consume(h),n.exit(i),n.exit(e),r):C(h)?(n.enter("lineEnding"),n.consume(h),n.exit("lineEnding"),c):(n.enter("chunkString",{contentType:"string"}),p(h))}function p(h){return h===null||h===91||h===93||C(h)||a++>999?(n.exit("chunkString"),c(h)):(n.consume(h),x||(x=!E(h)),h===92?g:p)}function g(h){return h===91||h===92||h===93?(n.consume(h),a++,p):p(h)}}function _n(n,r,t,e,i,u){let l;return a;function a(g){return g===34||g===39||g===40?(n.enter(e),n.enter(i),n.consume(g),n.exit(i),l=g===40?41:g,x):t(g)}function x(g){return g===l?(n.enter(i),n.consume(g),n.exit(i),n.exit(e),r):(n.enter(u),m(g))}function m(g){return g===l?(n.exit(u),x(l)):g===null?t(g):C(g)?(n.enter("lineEnding"),n.consume(g),n.exit("lineEnding"),I(n,m,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),c(g))}function c(g){return g===l||g===null||C(g)?(n.exit("chunkString"),m(g)):(n.consume(g),g===92?p:c)}function p(g){return g===l||g===92?(n.consume(g),c):c(g)}}function d(n,r){let t;return e;function e(i){return C(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),t=!0,e):E(i)?I(n,e,t?"linePrefix":"lineSuffix")(i):r(i)}}function cn(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ct={name:"definition",tokenize:Et},At={tokenize:zt,partial:!0};function Et(n,r,t){const e=this;let i;return u;function u(h){return n.enter("definition"),l(h)}function l(h){return Tn.call(e,n,a,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=cn(e.sliceSerialize(e.events[e.events.length-1][1]).slice(1,-1)),h===58?(n.enter("definitionMarker"),n.consume(h),n.exit("definitionMarker"),x):t(h)}function x(h){return V(h)?d(n,m)(h):m(h)}function m(h){return Dn(n,c,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return n.attempt(At,p,p)(h)}function p(h){return E(h)?I(n,g,"whitespace")(h):g(h)}function g(h){return h===null||C(h)?(n.exit("definition"),e.parser.defined.push(i),r(h)):t(h)}}function zt(n,r,t){return e;function e(a){return V(a)?d(n,i)(a):t(a)}function i(a){return _n(n,u,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function u(a){return E(a)?I(n,l,"whitespace")(a):l(a)}function l(a){return a===null||C(a)?r(a):t(a)}}const wt={name:"hardBreakEscape",tokenize:yt};function yt(n,r,t){return e;function e(u){return n.enter("hardBreakEscape"),n.consume(u),i}function i(u){return C(u)?(n.exit("hardBreakEscape"),r(u)):t(u)}}const It={name:"headingAtx",tokenize:Ot,resolve:Bt};function Bt(n,r){let t=n.length-2,e=3,i,u;return n[e][1].type==="whitespace"&&(e+=2),t-2>e&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(e===t-1||t-4>e&&n[t-2][1].type==="whitespace")&&(t-=e+1===t?2:4),t>e&&(i={type:"atxHeadingText",start:n[e][1].start,end:n[t][1].end},u={type:"chunkText",start:n[e][1].start,end:n[t][1].end,contentType:"text"},Z(n,e,t-e+1,[["enter",i,r],["enter",u,r],["exit",u,r],["exit",i,r]])),n}function Ot(n,r,t){let e=0;return i;function i(c){return n.enter("atxHeading"),u(c)}function u(c){return n.enter("atxHeadingSequence"),l(c)}function l(c){return c===35&&e++<6?(n.consume(c),l):c===null||V(c)?(n.exit("atxHeadingSequence"),a(c)):t(c)}function a(c){return c===35?(n.enter("atxHeadingSequence"),x(c)):c===null||C(c)?(n.exit("atxHeading"),r(c)):E(c)?I(n,a,"whitespace")(c):(n.enter("atxHeadingText"),m(c))}function x(c){return c===35?(n.consume(c),x):(n.exit("atxHeadingSequence"),a(c))}function m(c){return c===null||c===35||V(c)?(n.exit("atxHeadingText"),a(c)):(n.consume(c),m)}}const Dt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],An=["pre","script","style","textarea"],Tt={name:"htmlFlow",tokenize:Mt,resolveTo:Pt,concrete:!0},_t={tokenize:jt,partial:!0},Lt={tokenize:qt,partial:!0};function Pt(n){let r=n.length;for(;r--&&!(n[r][0]==="enter"&&n[r][1].type==="htmlFlow"););return r>1&&n[r-2][1].type==="linePrefix"&&(n[r][1].start=n[r-2][1].start,n[r+1][1].start=n[r-2][1].start,n.splice(r-2,2)),n}function Mt(n,r,t){const e=this;let i,u,l,a,x;return m;function m(s){return c(s)}function c(s){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(s),p}function p(s){return s===33?(n.consume(s),g):s===47?(n.consume(s),u=!0,w):s===63?(n.consume(s),i=3,e.interrupt?r:o):U(s)?(n.consume(s),l=String.fromCharCode(s),T):t(s)}function g(s){return s===45?(n.consume(s),i=2,h):s===91?(n.consume(s),i=5,a=0,z):U(s)?(n.consume(s),i=4,e.interrupt?r:o):t(s)}function h(s){return s===45?(n.consume(s),e.interrupt?r:o):t(s)}function z(s){const G="CDATA[";return s===G.charCodeAt(a++)?(n.consume(s),a===G.length?e.interrupt?r:F:z):t(s)}function w(s){return U(s)?(n.consume(s),l=String.fromCharCode(s),T):t(s)}function T(s){if(s===null||s===47||s===62||V(s)){const G=s===47,nn=l.toLowerCase();return!G&&!u&&An.includes(nn)?(i=1,e.interrupt?r(s):F(s)):Dt.includes(l.toLowerCase())?(i=6,G?(n.consume(s),f):e.interrupt?r(s):F(s)):(i=7,e.interrupt&&!e.parser.lazy[e.now().line]?t(s):u?_(s):b(s))}return s===45||W(s)?(n.consume(s),l+=String.fromCharCode(s),T):t(s)}function f(s){return s===62?(n.consume(s),e.interrupt?r:F):t(s)}function _(s){return E(s)?(n.consume(s),_):q(s)}function b(s){return s===47?(n.consume(s),q):s===58||s===95||U(s)?(n.consume(s),B):E(s)?(n.consume(s),b):q(s)}function B(s){return s===45||s===46||s===58||s===95||W(s)?(n.consume(s),B):D(s)}function D(s){return s===61?(n.consume(s),k):E(s)?(n.consume(s),D):b(s)}function k(s){return s===null||s===60||s===61||s===62||s===96?t(s):s===34||s===39?(n.consume(s),x=s,y):E(s)?(n.consume(s),k):L(s)}function y(s){return s===x?(n.consume(s),x=null,M):s===null||C(s)?t(s):(n.consume(s),y)}function L(s){return s===null||s===34||s===39||s===47||s===60||s===61||s===62||s===96||V(s)?D(s):(n.consume(s),L)}function M(s){return s===47||s===62||E(s)?b(s):t(s)}function q(s){return s===62?(n.consume(s),S):t(s)}function S(s){return s===null||C(s)?F(s):E(s)?(n.consume(s),S):t(s)}function F(s){return s===45&&i===2?(n.consume(s),N):s===60&&i===1?(n.consume(s),j):s===62&&i===4?(n.consume(s),Y):s===63&&i===3?(n.consume(s),o):s===93&&i===5?(n.consume(s),K):C(s)&&(i===6||i===7)?(n.exit("htmlFlowData"),n.check(_t,X,O)(s)):s===null||C(s)?(n.exit("htmlFlowData"),O(s)):(n.consume(s),F)}function O(s){return n.check(Lt,P,X)(s)}function P(s){return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),A}function A(s){return s===null||C(s)?O(s):(n.enter("htmlFlowData"),F(s))}function N(s){return s===45?(n.consume(s),o):F(s)}function j(s){return s===47?(n.consume(s),l="",$):F(s)}function $(s){if(s===62){const G=l.toLowerCase();return An.includes(G)?(n.consume(s),Y):F(s)}return U(s)&&l.length<8?(n.consume(s),l+=String.fromCharCode(s),$):F(s)}function K(s){return s===93?(n.consume(s),o):F(s)}function o(s){return s===62?(n.consume(s),Y):s===45&&i===2?(n.consume(s),o):F(s)}function Y(s){return s===null||C(s)?(n.exit("htmlFlowData"),X(s)):(n.consume(s),Y)}function X(s){return n.exit("htmlFlow"),r(s)}}function qt(n,r,t){const e=this;return i;function i(l){return C(l)?(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),u):t(l)}function u(l){return e.parser.lazy[e.now().line]?t(l):r(l)}}function jt(n,r,t){return e;function e(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),n.attempt(un,r,t)}}const Rt={name:"htmlText",tokenize:Nt};function Nt(n,r,t){const e=this;let i,u,l;return a;function a(o){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(o),x}function x(o){return o===33?(n.consume(o),m):o===47?(n.consume(o),D):o===63?(n.consume(o),b):U(o)?(n.consume(o),L):t(o)}function m(o){return o===45?(n.consume(o),c):o===91?(n.consume(o),u=0,z):U(o)?(n.consume(o),_):t(o)}function c(o){return o===45?(n.consume(o),h):t(o)}function p(o){return o===null?t(o):o===45?(n.consume(o),g):C(o)?(l=p,j(o)):(n.consume(o),p)}function g(o){return o===45?(n.consume(o),h):p(o)}function h(o){return o===62?N(o):o===45?g(o):p(o)}function z(o){const Y="CDATA[";return o===Y.charCodeAt(u++)?(n.consume(o),u===Y.length?w:z):t(o)}function w(o){return o===null?t(o):o===93?(n.consume(o),T):C(o)?(l=w,j(o)):(n.consume(o),w)}function T(o){return o===93?(n.consume(o),f):w(o)}function f(o){return o===62?N(o):o===93?(n.consume(o),f):w(o)}function _(o){return o===null||o===62?N(o):C(o)?(l=_,j(o)):(n.consume(o),_)}function b(o){return o===null?t(o):o===63?(n.consume(o),B):C(o)?(l=b,j(o)):(n.consume(o),b)}function B(o){return o===62?N(o):b(o)}function D(o){return U(o)?(n.consume(o),k):t(o)}function k(o){return o===45||W(o)?(n.consume(o),k):y(o)}function y(o){return C(o)?(l=y,j(o)):E(o)?(n.consume(o),y):N(o)}function L(o){return o===45||W(o)?(n.consume(o),L):o===47||o===62||V(o)?M(o):t(o)}function M(o){return o===47?(n.consume(o),N):o===58||o===95||U(o)?(n.consume(o),q):C(o)?(l=M,j(o)):E(o)?(n.consume(o),M):N(o)}function q(o){return o===45||o===46||o===58||o===95||W(o)?(n.consume(o),q):S(o)}function S(o){return o===61?(n.consume(o),F):C(o)?(l=S,j(o)):E(o)?(n.consume(o),S):M(o)}function F(o){return o===null||o===60||o===61||o===62||o===96?t(o):o===34||o===39?(n.consume(o),i=o,O):C(o)?(l=F,j(o)):E(o)?(n.consume(o),F):(n.consume(o),P)}function O(o){return o===i?(n.consume(o),i=void 0,A):o===null?t(o):C(o)?(l=O,j(o)):(n.consume(o),O)}function P(o){return o===null||o===34||o===39||o===60||o===61||o===96?t(o):o===47||o===62||V(o)?M(o):(n.consume(o),P)}function A(o){return o===47||o===62||V(o)?M(o):t(o)}function N(o){return o===62?(n.consume(o),n.exit("htmlTextData"),n.exit("htmlText"),r):t(o)}function j(o){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),$}function $(o){return E(o)?I(n,K,"linePrefix",e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):K(o)}function K(o){return n.enter("htmlTextData"),l(o)}}const xn={name:"labelEnd",tokenize:Zt,resolveTo:Ut,resolveAll:Wt},Ht={tokenize:$t},Vt={tokenize:Yt},Qt={tokenize:Gt};function Wt(n){let r=-1;for(;++r<n.length;){const t=n[r][1];(t.type==="labelImage"||t.type==="labelLink"||t.type==="labelEnd")&&(n.splice(r+1,t.type==="labelImage"?4:2),t.type="data",r++)}return n}function Ut(n,r){let t=n.length,e=0,i,u,l,a;for(;t--;)if(i=n[t][1],u){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(l){if(n[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(u=t,i.type!=="labelLink")){e=2;break}}else i.type==="labelEnd"&&(l=t);const x={type:n[u][1].type==="labelLink"?"link":"image",start:Object.assign({},n[u][1].start),end:Object.assign({},n[n.length-1][1].end)},m={type:"label",start:Object.assign({},n[u][1].start),end:Object.assign({},n[l][1].end)},c={type:"labelText",start:Object.assign({},n[u+e+2][1].end),end:Object.assign({},n[l-2][1].start)};return a=[["enter",x,r],["enter",m,r]],a=Q(a,n.slice(u+1,u+e+3)),a=Q(a,[["enter",c,r]]),a=Q(a,pn(r.parser.constructs.insideSpan.null,n.slice(u+e+4,l-3),r)),a=Q(a,[["exit",c,r],n[l-2],n[l-1],["exit",m,r]]),a=Q(a,n.slice(l+1)),a=Q(a,[["exit",x,r]]),Z(n,u,n.length,a),n}function Zt(n,r,t){const e=this;let i=e.events.length,u,l;for(;i--;)if((e.events[i][1].type==="labelImage"||e.events[i][1].type==="labelLink")&&!e.events[i][1]._balanced){u=e.events[i][1];break}return a;function a(g){return u?u._inactive?p(g):(l=e.parser.defined.includes(cn(e.sliceSerialize({start:u.end,end:e.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(g),n.exit("labelMarker"),n.exit("labelEnd"),x):t(g)}function x(g){return g===40?n.attempt(Ht,c,l?c:p)(g):g===91?n.attempt(Vt,c,l?m:p)(g):l?c(g):p(g)}function m(g){return n.attempt(Qt,c,p)(g)}function c(g){return r(g)}function p(g){return u._balanced=!0,t(g)}}function $t(n,r,t){return e;function e(p){return n.enter("resource"),n.enter("resourceMarker"),n.consume(p),n.exit("resourceMarker"),i}function i(p){return V(p)?d(n,u)(p):u(p)}function u(p){return p===41?c(p):Dn(n,l,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return V(p)?d(n,x)(p):c(p)}function a(p){return t(p)}function x(p){return p===34||p===39||p===40?_n(n,m,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):c(p)}function m(p){return V(p)?d(n,c)(p):c(p)}function c(p){return p===41?(n.enter("resourceMarker"),n.consume(p),n.exit("resourceMarker"),n.exit("resource"),r):t(p)}}function Yt(n,r,t){const e=this;return i;function i(a){return Tn.call(e,n,u,l,"reference","referenceMarker","referenceString")(a)}function u(a){return e.parser.defined.includes(cn(e.sliceSerialize(e.events[e.events.length-1][1]).slice(1,-1)))?r(a):t(a)}function l(a){return t(a)}}function Gt(n,r,t){return e;function e(u){return n.enter("reference"),n.enter("referenceMarker"),n.consume(u),n.exit("referenceMarker"),i}function i(u){return u===93?(n.enter("referenceMarker"),n.consume(u),n.exit("referenceMarker"),n.exit("reference"),r):t(u)}}const Jt={name:"labelStartImage",tokenize:Kt,resolveAll:xn.resolveAll};function Kt(n,r,t){const e=this;return i;function i(a){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(a),n.exit("labelImageMarker"),u}function u(a){return a===91?(n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelImage"),l):t(a)}function l(a){return a===94&&"_hiddenFootnoteSupport"in e.parser.constructs?t(a):r(a)}}const Xt={name:"labelStartLink",tokenize:vt,resolveAll:xn.resolveAll};function vt(n,r,t){const e=this;return i;function i(l){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(l),n.exit("labelMarker"),n.exit("labelLink"),u}function u(l){return l===94&&"_hiddenFootnoteSupport"in e.parser.constructs?t(l):r(l)}}const on={name:"lineEnding",tokenize:dt};function dt(n,r){return t;function t(e){return n.enter("lineEnding"),n.consume(e),n.exit("lineEnding"),I(n,r,"linePrefix")}}const rn={name:"thematicBreak",tokenize:ne};function ne(n,r,t){let e=0,i;return u;function u(m){return n.enter("thematicBreak"),l(m)}function l(m){return i=m,a(m)}function a(m){return m===i?(n.enter("thematicBreakSequence"),x(m)):e>=3&&(m===null||C(m))?(n.exit("thematicBreak"),r(m)):t(m)}function x(m){return m===i?(n.consume(m),e++,x):(n.exit("thematicBreakSequence"),E(m)?I(n,a,"whitespace")(m):a(m))}}const H={name:"list",tokenize:re,continuation:{tokenize:ie},exit:le},te={tokenize:ae,partial:!0},ee={tokenize:ue,partial:!0};function re(n,r,t){const e=this,i=e.events[e.events.length-1];let u=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,l=0;return a;function a(h){const z=e.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(z==="listUnordered"?!e.containerState.marker||h===e.containerState.marker:hn(h)){if(e.containerState.type||(e.containerState.type=z,n.enter(z,{_container:!0})),z==="listUnordered")return n.enter("listItemPrefix"),h===42||h===45?n.check(rn,t,m)(h):m(h);if(!e.interrupt||h===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),x(h)}return t(h)}function x(h){return hn(h)&&++l<10?(n.consume(h),x):(!e.interrupt||l<2)&&(e.containerState.marker?h===e.containerState.marker:h===41||h===46)?(n.exit("listItemValue"),m(h)):t(h)}function m(h){return n.enter("listItemMarker"),n.consume(h),n.exit("listItemMarker"),e.containerState.marker=e.containerState.marker||h,n.check(un,e.interrupt?t:c,n.attempt(te,g,p))}function c(h){return e.containerState.initialBlankLine=!0,u++,g(h)}function p(h){return E(h)?(n.enter("listItemPrefixWhitespace"),n.consume(h),n.exit("listItemPrefixWhitespace"),g):t(h)}function g(h){return e.containerState.size=u+e.sliceSerialize(n.exit("listItemPrefix"),!0).length,r(h)}}function ie(n,r,t){const e=this;return e.containerState._closeFlow=void 0,n.check(un,i,u);function i(a){return e.containerState.furtherBlankLines=e.containerState.furtherBlankLines||e.containerState.initialBlankLine,I(n,r,"listItemIndent",e.containerState.size+1)(a)}function u(a){return e.containerState.furtherBlankLines||!E(a)?(e.containerState.furtherBlankLines=void 0,e.containerState.initialBlankLine=void 0,l(a)):(e.containerState.furtherBlankLines=void 0,e.containerState.initialBlankLine=void 0,n.attempt(ee,r,l)(a))}function l(a){return e.containerState._closeFlow=!0,e.interrupt=void 0,I(n,n.attempt(H,r,t),"linePrefix",e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function ue(n,r,t){const e=this;return I(n,i,"listItemIndent",e.containerState.size+1);function i(u){const l=e.events[e.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===e.containerState.size?r(u):t(u)}}function le(n){n.exit(this.containerState.type)}function ae(n,r,t){const e=this;return I(n,i,"listItemPrefixWhitespace",e.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(u){const l=e.events[e.events.length-1];return!E(u)&&l&&l[1].type==="listItemPrefixWhitespace"?r(u):t(u)}}const En={name:"setextUnderline",tokenize:se,resolveTo:oe};function oe(n,r){let t=n.length,e,i,u;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){e=t;break}n[t][1].type==="paragraph"&&(i=t)}else n[t][1].type==="content"&&n.splice(t,1),!u&&n[t][1].type==="definition"&&(u=t);const l={type:"setextHeading",start:Object.assign({},n[i][1].start),end:Object.assign({},n[n.length-1][1].end)};return n[i][1].type="setextHeadingText",u?(n.splice(i,0,["enter",l,r]),n.splice(u+1,0,["exit",n[e][1],r]),n[e][1].end=Object.assign({},n[u][1].end)):n[e][1]=l,n.push(["exit",l,r]),n}function se(n,r,t){const e=this;let i;return u;function u(m){let c=e.events.length,p;for(;c--;)if(e.events[c][1].type!=="lineEnding"&&e.events[c][1].type!=="linePrefix"&&e.events[c][1].type!=="content"){p=e.events[c][1].type==="paragraph";break}return!e.parser.lazy[e.now().line]&&(e.interrupt||p)?(n.enter("setextHeadingLine"),i=m,l(m)):t(m)}function l(m){return n.enter("setextHeadingLineSequence"),a(m)}function a(m){return m===i?(n.consume(m),a):(n.exit("setextHeadingLineSequence"),E(m)?I(n,x,"lineSuffix")(m):x(m))}function x(m){return m===null||C(m)?(n.exit("setextHeadingLine"),r(m)):t(m)}}const he={tokenize:me};function me(n){const r=this,t=n.attempt(un,e,n.attempt(this.parser.constructs.flowInitial,i,I(n,n.attempt(this.parser.constructs.flow,i,n.attempt(kt,i)),"linePrefix")));return t;function e(u){if(u===null){n.consume(u);return}return n.enter("lineEndingBlank"),n.consume(u),n.exit("lineEndingBlank"),r.currentConstruct=void 0,t}function i(u){if(u===null){n.consume(u);return}return n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),r.currentConstruct=void 0,t}}const pe={resolveAll:Pn()},ce=Ln("string"),xe=Ln("text");function Ln(n){return{tokenize:r,resolveAll:Pn(n==="text"?ge:void 0)};function r(t){const e=this,i=this.parser.constructs[n],u=t.attempt(i,l,a);return l;function l(c){return m(c)?u(c):a(c)}function a(c){if(c===null){t.consume(c);return}return t.enter("data"),t.consume(c),x}function x(c){return m(c)?(t.exit("data"),u(c)):(t.consume(c),x)}function m(c){if(c===null)return!0;const p=i[c];let g=-1;if(p)for(;++g<p.length;){const h=p[g];if(!h.previous||h.previous.call(e,e.previous))return!0}return!1}}}function Pn(n){return r;function r(t,e){let i=-1,u;for(;++i<=t.length;)u===void 0?t[i]&&t[i][1].type==="data"&&(u=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==u+2&&(t[u][1].end=t[i-1][1].end,t.splice(u+2,i-u-2),i=u+2),u=void 0);return n?n(t,e):t}}function ge(n,r){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const e=n[t-1][1],i=r.sliceStream(e);let u=i.length,l=-1,a=0,x;for(;u--;){const m=i[u];if(typeof m=="string"){for(l=m.length;m.charCodeAt(l-1)===32;)a++,l--;if(l)break;l=-1}else if(m===-2)x=!0,a++;else if(m!==-1){u++;break}}if(a){const m={type:t===n.length||x||a<2?"lineSuffix":"hardBreakTrailing",start:{line:e.end.line,column:e.end.column-a,offset:e.end.offset-a,_index:e.start._index+u,_bufferIndex:u?l:e.start._bufferIndex+l},end:Object.assign({},e.end)};e.end=Object.assign({},m.start),e.start.offset===e.end.offset?Object.assign(e,m):(n.splice(t,0,["enter",m,r],["exit",m,r]),t+=2)}t++}return n}function ke(n,r,t){let e=Object.assign(t?Object.assign({},t):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},u=[];let l=[],a=[];const x={consume:_,enter:b,exit:B,attempt:y(D),check:y(k),interrupt:y(k,{interrupt:!0})},m={previous:null,code:null,containerState:{},events:[],parser:n,sliceStream:h,sliceSerialize:g,now:z,defineSkip:w,write:p};let c=r.tokenize.call(m,x);return r.resolveAll&&u.push(r),m;function p(S){return l=Q(l,S),T(),l[l.length-1]!==null?[]:(L(r,0),m.events=pn(u,m.events,m),m.events)}function g(S,F){return be(h(S),F)}function h(S){return fe(l,S)}function z(){const{line:S,column:F,offset:O,_index:P,_bufferIndex:A}=e;return{line:S,column:F,offset:O,_index:P,_bufferIndex:A}}function w(S){i[S.line]=S.column,q()}function T(){let S;for(;e._index<l.length;){const F=l[e._index];if(typeof F=="string")for(S=e._index,e._bufferIndex<0&&(e._bufferIndex=0);e._index===S&&e._bufferIndex<F.length;)f(F.charCodeAt(e._bufferIndex));else f(F)}}function f(S){c=c(S)}function _(S){C(S)?(e.line++,e.column=1,e.offset+=S===-3?2:1,q()):S!==-1&&(e.column++,e.offset++),e._bufferIndex<0?e._index++:(e._bufferIndex++,e._bufferIndex===l[e._index].length&&(e._bufferIndex=-1,e._index++)),m.previous=S}function b(S,F){const O=F||{};return O.type=S,O.start=z(),m.events.push(["enter",O,m]),a.push(O),O}function B(S){const F=a.pop();return F.end=z(),m.events.push(["exit",F,m]),F}function D(S,F){L(S,F.from)}function k(S,F){F.restore()}function y(S,F){return O;function O(P,A,N){let j,$,K,o;return Array.isArray(P)?X(P):"tokenize"in P?X([P]):Y(P);function Y(R){return ln;function ln(v){const tn=v!==null&&R[v],en=v!==null&&R.null,Mn=[...Array.isArray(tn)?tn:tn?[tn]:[],...Array.isArray(en)?en:en?[en]:[]];return X(Mn)(v)}}function X(R){return j=R,$=0,R.length===0?N:s(R[$])}function s(R){return ln;function ln(v){return o=M(),K=R,R.partial||(m.currentConstruct=R),R.name&&m.parser.constructs.disable.null.includes(R.name)?nn():R.tokenize.call(F?Object.assign(Object.create(m),F):m,x,G,nn)(v)}}function G(R){return S(K,o),A}function nn(R){return o.restore(),++$<j.length?s(j[$]):N}}}function L(S,F){S.resolveAll&&!u.includes(S)&&u.push(S),S.resolve&&Z(m.events,F,m.events.length-F,S.resolve(m.events.slice(F),m)),S.resolveTo&&(m.events=S.resolveTo(m.events,m))}function M(){const S=z(),F=m.previous,O=m.currentConstruct,P=m.events.length,A=Array.from(a);return{restore:N,from:P};function N(){e=S,m.previous=F,m.currentConstruct=O,m.events.length=P,a=A,q()}}function q(){e.line in i&&e.column<2&&(e.column=i[e.line],e.offset+=i[e.line]-1)}}function fe(n,r){const t=r.start._index,e=r.start._bufferIndex,i=r.end._index,u=r.end._bufferIndex;let l;if(t===i)l=[n[t].slice(e,u)];else{if(l=n.slice(t,i),e>-1){const a=l[0];typeof a=="string"?l[0]=a.slice(e):l.shift()}u>0&&l.push(n[i].slice(0,u))}return l}function be(n,r){let t=-1;const e=[];let i;for(;++t<n.length;){const u=n[t];let l;if(typeof u=="string")l=u;else switch(u){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=r?" ":"	";break}case-1:{if(!r&&i)continue;l=" ";break}default:l=String.fromCharCode(u)}i=u===-2,e.push(l)}return e.join("")}const Fe={42:H,43:H,45:H,48:H,49:H,50:H,51:H,52:H,53:H,54:H,55:H,56:H,57:H,62:wn},Se={91:Ct},Ce={[-2]:an,[-1]:an,32:an},Ae={35:It,42:rn,45:[En,rn],60:Tt,61:En,95:rn,96:Cn,126:Cn},Ee={38:Bn,92:yn},ze={[-5]:on,[-4]:on,[-3]:on,33:Jt,38:Bn,42:mn,60:[vn,Rt],91:Xt,92:[wt,yn],93:xn,95:mn,96:mt},we={null:[mn,pe]},ye={null:[42,95]},Ie={null:[]},Be=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:ye,contentInitial:Se,disable:Ie,document:Fe,flow:Ae,flowInitial:Ce,insideSpan:we,string:Ee,text:ze},Symbol.toStringTag,{value:"Module"}));function _e(n){const t=qn([Be,...(n||{}).extensions||[]]),e={defined:[],lazy:{},constructs:t,content:i(Zn),document:i(Yn),flow:i(he),string:i(ce),text:i(xe)};return e;function i(u){return l;function l(a){return ke(e,u,a)}}}const zn=/[\0\t\n\r]/g;function Le(){let n=1,r="",t=!0,e;return i;function i(u,l,a){const x=[];let m,c,p,g,h;for(u=r+u.toString(l),p=0,r="",t&&(u.charCodeAt(0)===65279&&p++,t=void 0);p<u.length;){if(zn.lastIndex=p,m=zn.exec(u),g=m&&m.index!==void 0?m.index:u.length,h=u.charCodeAt(g),!m){r=u.slice(p);break}if(h===10&&p===g&&e)x.push(-3),e=void 0;else switch(e&&(x.push(-5),e=void 0),p<g&&(x.push(u.slice(p,g)),n+=g-p),h){case 0:{x.push(65533),n++;break}case 9:{for(c=Math.ceil(n/4)*4,x.push(-2);n++<c;)x.push(-1);break}case 10:{x.push(-4),n=1;break}default:e=!0,n=1}p=g+1}return a&&(e&&x.push(-5),r&&x.push(r),x.push(null)),x}}function Pe(n){for(;!On(n););return n}function Oe(n,r){const t=Number.parseInt(n,r);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"�":String.fromCharCode(t)}const De=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Me(n){return n.replace(De,Te)}function Te(n,r,t){if(r)return r;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),u=i===120||i===88;return Oe(t.slice(u?2:1),u?16:10)}return In(t)||n}export{_e as a,Le as b,In as c,Me as d,Oe as e,cn as n,Pe as p};
